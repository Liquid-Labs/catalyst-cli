{"version":3,"file":"index.js","sources":["../node_modules/@liquid-labs/policies-model/dist/index.es.js","../src/actions/policies/lib/policies-document.js"],"sourcesContent":["import { writeFileSync, readFileSync, existsSync } from 'fs';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar classCallCheck = _classCallCheck;\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar createClass = _createClass;\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar tsv = createCommonjsModule(function (module) {\n(function(){\n\n    var br = \"\\n\";\n\n    function extend (o) {\n        Array.prototype.slice.call(arguments, 1).forEach(function(source){\n            if (!source) return\n            for (var keys = Object.keys(source), i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                o[key] = source[key];\n            }\n        });\n        return o\n    }\n\n    function unquote (str) {\n        var match;\n        return (match = str.match(/(['\"]?)(.*)\\1/)) && match[2] || str\n    }\n\n    function comments (line) {\n        return !/#@/.test(line[0])\n    }\n\n    function getValues (line, sep) {\n        return line.split(sep).map(function(value){\n            var value = unquote(value), num = +value;\n            return num === parseInt(value, 10) ? num : value\n        })\n    }\n\n    function Parser (sep, options) {\n        var opt = extend({\n            header: true\n        }, options);\n\n        this.sep = sep;\n        this.header = opt.header;\n    }\n\n    Parser.prototype.stringify = function (data) {\n        var sep    = this.sep\n          , head   = !!this.header\n          , keys   = (typeof data[0] === 'object') && Object.keys(data[0])\n          , header = keys && keys.join(sep)\n          , output = head ? (header + br) : '';\n\n        if (!data || !keys) return ''\n            \n        return output + data.map(function(obj){\n            var values = keys.reduce(function(p, key){\n                p.push(obj[key]);\n                return p\n            }, []);\n            return values.join(sep)\n        }).join(br)\n    };\n\n    Parser.prototype.parse = function (tsv) {\n        var sep   = this.sep\n          , lines = tsv.split(/[\\n\\r]/).filter(comments)\n          , head  = !!this.header\n          , keys  = head ? getValues(lines.shift(), sep) : {};\n\n        if (lines.length < 1) return []\n\n        return lines.reduce(function(output, line){\n            var item = head ? {} : [];\n            output.push(getValues(line, sep).reduce(function(item, val, i){\n                item[keys[i] || i] = val;\n                return item\n            }, item));\n            return output\n        }, [])\n    };\n\n    // Export TSV parser as main, but also expose `.TSV`, `.CSV` and `.Parser`.\n    var TSV = new Parser(\"\\t\");\n\n    extend(TSV, {\n        TSV    : TSV\n      , CSV    : new Parser(\",\")\n      , Parser : Parser\n    });\n\n    if ( module.exports){\n        module.exports = TSV;\n    } else {\n        this.TSV = TSV;\n    }\n\n}).call(commonjsGlobal);\n});\n\nvar _temp, _headers, _fileName, _keys, _data, _cursor;\n/**\n * Converts array-string data to an intermediate object. Handles the special '-' <=> null and muti-part field\n * conversions to arrays.\n */\n\nvar item = function item(keys, multis, fields, pos) {\n  if (keys.length !== fields.length) throw new Error(\"Found \".concat(keys.length, \" keys but \").concat(fields.length, \" fields at item \").concat(pos, \" (\").concat(fields[0], \").\"));\n  var item = {\n    _pos: pos\n  };\n\n  for (var i = 0; i < fields.length; i += 1) {\n    item[keys[i]] = multis[keys[i]] ? fields[i] === '' || fields[i] === '-' ? [] : fields[i].split(/\\s*,\\s*/) : fields[i] === '' || fields[i] === '-' ? null : fields[i];\n  }\n\n  return item;\n};\n\nvar TsvExt = (_temp =\n/*#__PURE__*/\nfunction () {\n  function TsvExt(headers, keys, fileName, multis) {\n    classCallCheck(this, TsvExt);\n\n    _headers.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _fileName.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _keys.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _data.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _cursor.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    this.headers = headers;\n    this.fileName = fileName;\n    var contents = readFileSync(fileName, 'utf8');\n    var lines = contents.split(\"\\n\");\n    lines.shift(); // remove headers line\n    // allow blank lines (which are ignored)\n\n    var filteredLines = lines.filter(function (line) {\n      return !line.match(/^\\s*$/);\n    });\n    tsv.header = false;\n    this.keys = keys;\n    this.multis = multis || {};\n    this.data = filteredLines.length > 0 ? tsv.parse(filteredLines.join(\"\\n\")) : [];\n  }\n\n  createClass(TsvExt, [{\n    key: \"getItems\",\n    value: function getItems() {\n      var _this = this;\n\n      return this.data.map(function (r, i) {\n        return item(_this.keys, _this.multis, r, i);\n      });\n    }\n  }, {\n    key: \"write\",\n    value: function write() {\n      writeFileSync(this.fileName, \"\".concat(this.headers.join(\"\\t\"), \"\\n\") + \"\".concat(this.data.map(function (line) {\n        return line.map(function (v) {\n          return v === '' ? '-' : v;\n        }).join(\"\\t\");\n      }).join(\"\\n\"), \"\\n\"));\n    } // Generic find; assumes the first column is the key.\n\n  }, {\n    key: \"find\",\n    value: function find(key) {\n      return this.data.find(function (line) {\n        return line[0] === key;\n      });\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.data.length;\n    }\n  }]);\n\n  return TsvExt;\n}(), _headers = new WeakMap(), _fileName = new WeakMap(), _keys = new WeakMap(), _data = new WeakMap(), _cursor = new WeakMap(), _temp);\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar arrayWithoutHoles = _arrayWithoutHoles;\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nvar iterableToArray = _iterableToArray;\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar nonIterableSpread = _nonIterableSpread;\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nvar toConsumableArray = _toConsumableArray;\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar arrayWithHoles = _arrayWithHoles;\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nvar iterableToArrayLimit = _iterableToArrayLimit;\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar nonIterableRest = _nonIterableRest;\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nvar slicedToArray = _slicedToArray;\n\nvar Node =\n/*#__PURE__*/\nfunction () {\n  function Node(_ref) {\n    var _ref2 = slicedToArray(_ref, 2),\n        name = _ref2[0],\n        parentName = _ref2[1];\n\n    classCallCheck(this, Node);\n\n    this.name = name;\n    this.parentName = parentName;\n    this.parent = undefined;\n    this.children = [];\n  }\n\n  createClass(Node, [{\n    key: \"getName\",\n    value: function getName() {\n      return this.name;\n    }\n  }, {\n    key: \"getParent\",\n    value: function getParent() {\n      return this.parent;\n    }\n  }, {\n    key: \"getChildren\",\n    value: function getChildren() {\n      return this.children;\n    }\n  }, {\n    key: \"getDescendents\",\n    value: function getDescendents() {\n      return this.children.reduce(function (desc, child) {\n        return desc.concat(child.getDescendents());\n      }, toConsumableArray(this.children));\n    }\n  }, {\n    key: \"getTreeNodes\",\n    value: function getTreeNodes() {\n      return this.children.reduce(function (desc, child) {\n        return desc.concat(child.getTreeNodes());\n      }, [this]);\n    }\n  }]);\n\n  return Node;\n}();\n\nvar OrgStructure =\n/*#__PURE__*/\nfunction () {\n  function OrgStructure(fileName, roles) {\n    var _this = this;\n\n    classCallCheck(this, OrgStructure);\n\n    var nodes = JSON.parse(readFileSync(fileName)).map(function (r) {\n      return new Node(r);\n    });\n    this.roots = [];\n    nodes.forEach(function (node) {\n      if (node.parentName === null) {\n        node.parent = null; // which is not undefined, but positively null\n\n        _this.roots.push(node);\n      } else {\n        var parent = nodes.find(function (n) {\n          return n.name === node.parentName;\n        });\n        if (parent === undefined) throw new Error(\"Invalid org structure. Role '\".concat(node.name, \"' references \") + \"non-existent manager role '\".concat(node.parentName, \"'.\"));\n        node.parent = parent;\n        parent.children.push(node);\n      }\n    });\n    var orgRoles = this.getNodes().map(function (n) {\n      return n.getName();\n    }); // check all org role names reference defined roles\n\n    var undefinedRoles = orgRoles.filter(function (roleName) {\n      return roles[roleName] === undefined;\n    });\n    if (undefinedRoles.length > 0) throw new Error(\"Found undefined role reference\" + \"\".concat(undefinedRoles.length > 1 ? 's' : '', \": \").concat(undefinedRoles.join(', '))); // check for duplicate org roles\n\n    var dupeRoles = orgRoles.filter(function (name, index) {\n      return orgRoles.indexOf(name) !== index;\n    });\n    if (dupeRoles.length > 0) throw new Error(\"Found non-unique role\".concat(dupeRoles.length > 1 ? 's' : '', \" \") + \"references in org structure: \".concat(dupeRoles.join(', ')));\n  }\n\n  createClass(OrgStructure, [{\n    key: \"getRoots\",\n    value: function getRoots() {\n      return toConsumableArray(this.roots);\n    }\n  }, {\n    key: \"getNodes\",\n    value: function getNodes() {\n      return this.roots.reduce(function (nodes, root) {\n        return nodes.concat(root.getTreeNodes());\n      }, []);\n    }\n  }, {\n    key: \"getNodeByRoleName\",\n    value: function getNodeByRoleName(name) {\n      return this.getNodes().find(function (n) {\n        return n.getName() == name;\n      });\n    }\n  }]);\n\n  return OrgStructure;\n}();\n\nvar _typeof_1 = createCommonjsModule(function (module) {\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n});\n\n// JSONLoop is a trivial rework of https://github.com/dabeng/JSON-Loop cc9bf8d3ec9d366160\nvar nodes = [];\n\nvar JSONLoop =\n/*#__PURE__*/\nfunction () {\n  function JSONLoop(obj, idPropertyName, childrenPropertyName) {\n    classCallCheck(this, JSONLoop);\n\n    this.id = idPropertyName;\n    this.children = childrenPropertyName;\n    this.count = 0;\n    this.countNodes(obj);\n    this.total = this.count + 0;\n  }\n\n  createClass(JSONLoop, [{\n    key: \"isEmpty\",\n    value: function isEmpty(obj) {\n      for (var property in obj) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"countNodes\",\n    value: function countNodes(obj) {\n      var that = this;\n      this.count++;\n      return function () {\n        if (!obj || that.isEmpty(obj)) {\n          return false;\n        } else {\n          if (obj[that.children]) {\n            obj[that.children].forEach(function (child) {\n              that.countNodes(child);\n            });\n          }\n        }\n      }();\n    }\n  }, {\n    key: \"generateClone\",\n    value: function generateClone(obj) {\n      var target = {};\n\n      for (var i in obj) {\n        if (i !== this.children) {\n          target[i] = obj[i];\n        }\n      }\n\n      return target;\n    }\n  }, {\n    key: \"findNodeById\",\n    value: function findNodeById(obj, id, callback) {\n      if (obj[this.id] === id) {\n        this.count = this.total + 0;\n        callback(null, obj);\n      } else {\n        if (this.count === 1) {\n          this.count = this.total + 0;\n          callback('the node does not exist', null);\n        }\n\n        this.count--;\n\n        if (obj[this.children]) {\n          var that = this;\n          obj[this.children].forEach(function (node) {\n            that.findNodeById(node, id, callback);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"matchConditions\",\n    value: function matchConditions(obj, conditions) {\n      var flag = true;\n      Object.keys(conditions).forEach(function (item) {\n        if (typeof conditions[item] === 'string' || typeof conditions[item] === 'number') {\n          if (obj[item] !== conditions[item]) {\n            flag = false;\n            return false;\n          }\n        } else if (conditions[item] instanceof RegExp) {\n          console.error(\"testing...\");\n\n          if (!conditions[item].test(obj[item])) {\n            console.error(\"failed\");\n            flag = false;\n            return false;\n          }\n        } else if (_typeof_1(conditions[item]) === 'object') {\n          Object.keys(conditions[item]).forEach(function (subitem) {\n            switch (subitem) {\n              case '>':\n                {\n                  if (!(obj[item] > conditions[item][subitem])) {\n                    flag = false;\n                    return false;\n                  }\n\n                  break;\n                }\n\n              case '<':\n                {\n                  if (!(obj[item] < conditions[item][subitem])) {\n                    flag = false;\n                    return false;\n                  }\n\n                  break;\n                }\n\n              case '>=':\n                {\n                  if (!(obj[item] >= conditions[item][subitem])) {\n                    flag = false;\n                    return false;\n                  }\n\n                  break;\n                }\n\n              case '<=':\n                {\n                  if (!(obj[item] <= conditions[item][subitem])) {\n                    flag = false;\n                    return false;\n                  }\n\n                  break;\n                }\n\n              case '!==':\n                {\n                  if (!(obj[item] !== conditions[item][subitem])) {\n                    flag = false;\n                    return false;\n                  }\n\n                  break;\n                }\n            }\n          });\n\n          if (!flag) {\n            return false;\n          }\n        }\n      });\n\n      if (!flag) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"findNodes\",\n    value: function findNodes(obj, conditions, callback) {\n      var that = this;\n      var copy = []; // ths shallow copy of nodes array\n\n      return function (obj, conditions, callback) {\n        if (that.matchConditions(obj, conditions)) {\n          nodes.push(obj);\n\n          if (that.count === 1) {\n            that.count = that.total + 0;\n            copy = nodes.slice(0);\n            nodes = [];\n            callback(null, copy);\n          }\n\n          that.count--;\n        } else {\n          if (that.count === 1) {\n            that.count = that.total + 0;\n            copy = nodes.slice(0);\n            nodes = [];\n            callback(null, copy);\n          }\n\n          that.count--;\n\n          if (obj[that.children]) {\n            obj[that.children].forEach(function (child) {\n              that.findNodes(child, conditions, callback);\n            });\n          }\n        }\n      }(obj, conditions, callback);\n    }\n  }, {\n    key: \"findParent\",\n    value: function findParent(obj, node, callback, needCleanNode) {\n      var that = this;\n\n      if (this.count === 1) {\n        this.count = this.total + 0;\n        callback('its parent node does not exist', null);\n      } else {\n        this.count--;\n\n        if (typeof obj[this.children] !== 'undefined') {\n          var notFind = true;\n          obj[this.children].forEach(function (item) {\n            if (item[that.id] === node[that.id]) {\n              that.count = that.total + 0;\n\n              if (needCleanNode) {\n                callback(null, that.generateClone(obj));\n              } else {\n                callback(null, obj);\n              }\n\n              notFind = false;\n              return false;\n            }\n          });\n\n          if (notFind) {\n            obj[this.children].forEach(function (item) {\n              that.findParent(item, node, callback);\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"findSiblings\",\n    value: function findSiblings(obj, node, callback) {\n      var that = this;\n      this.findParent(obj, node, function (err, parent) {\n        if (err) {\n          callback('its sibling nodes do not exist', null);\n        } else {\n          var siblings = [];\n          parent[that.children].forEach(function (item) {\n            if (item[that.id] !== node[that.id]) {\n              siblings.push(that.generateClone(item));\n            }\n          });\n          callback(null, siblings);\n        }\n      }, false);\n    }\n  }, {\n    key: \"findAncestors\",\n    value: function findAncestors(obj, node, callback) {\n      var that = this;\n\n      if (node[this.id] === obj[this.id]) {\n        var copy = nodes.slice(0);\n        nodes = [];\n        callback(null, copy);\n      } else {\n        this.findParent(obj, node, function (err, parent) {\n          if (err) {\n            callback('its ancestor nodes do not exist', null);\n          } else {\n            nodes.push(parent);\n            that.findAncestors(obj, parent, callback);\n          }\n        });\n      }\n    }\n  }]);\n\n  return JSONLoop;\n}();\n\nvar AttachedRole =\n/*#__PURE__*/\nfunction () {\n  function AttachedRole(baseRole, staffMember, parameters) {\n    classCallCheck(this, AttachedRole);\n\n    parameters = parameters !== undefined && parameters.split(/\\s*;\\s*/) || [];\n    this.baseRole = baseRole;\n    this.acting = parameters.some(function (p) {\n      return p === 'acting';\n    });\n    var qualifierCapt = parameters.reduce(function (result, p) {\n      return result || /qual:([^,]+)/.exec(p);\n    }, null);\n    this.qualifier = null;\n    if (qualifierCapt) this.qualifier = qualifierCapt[1].trim();\n    if (!baseRole.isQualifiable() && this.qualifier) throw new Error(\"Attempt to qualify non-qualifiable role '\".concat(baseRole.getName(), \"' \") + \"for staff member '\".concat(staffMember.getEmail(), \"'.\"));\n  }\n\n  createClass(AttachedRole, [{\n    key: \"getName\",\n    value: function getName() {\n      return this.baseRole.getName();\n    }\n  }, {\n    key: \"isActing\",\n    value: function isActing() {\n      return this.acting;\n    }\n  }, {\n    key: \"isQualifiable\",\n    value: function isQualifiable() {\n      return this.baseRole.isQualifiable();\n    }\n  }, {\n    key: \"getQualifier\",\n    value: function getQualifier() {\n      return this.qualifier;\n    }\n  }]);\n\n  return AttachedRole;\n}();\n\nvar Role =\n/*#__PURE__*/\nfunction () {\n  function Role(item) {\n    classCallCheck(this, Role);\n\n    this.item = item;\n  }\n\n  createClass(Role, [{\n    key: \"getName\",\n    value: function getName() {\n      return this.item.name;\n    }\n  }, {\n    key: \"isQualifiable\",\n    value: function isQualifiable() {\n      var application = this.item.application;\n      return Boolean(application && application.match(/(^|;)\\s*qualifiable\\s*(;|$)/));\n    }\n  }, {\n    key: \"attachTo\",\n    value: function attachTo(staff, parameters) {\n      return new AttachedRole(this, staff, parameters);\n    }\n  }]);\n\n  return Role;\n}();\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar assertThisInitialized = _assertThisInitialized;\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof_1(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nvar possibleConstructorReturn = _possibleConstructorReturn;\n\nvar getPrototypeOf = createCommonjsModule(function (module) {\nfunction _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\n});\n\nvar setPrototypeOf = createCommonjsModule(function (module) {\nfunction _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\n});\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nvar inherits = _inherits;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar defineProperty = _defineProperty;\n\nvar _class, _temp$1;\nvar RolesTsv = (_temp$1 = _class =\n/*#__PURE__*/\nfunction (_TsvExt) {\n  inherits(RolesTsv, _TsvExt);\n\n  function RolesTsv(fileName) {\n    var _this;\n\n    classCallCheck(this, RolesTsv);\n\n    _this = possibleConstructorReturn(this, getPrototypeOf(RolesTsv).call(this, RolesTsv.headers, RolesTsv.keys, fileName));\n\n    defineProperty(assertThisInitialized(_this), \"matchKey\", function (line, key) {\n      return line[0] === key;\n    });\n\n    return _this;\n  }\n\n  createClass(RolesTsv, [{\n    key: \"notUnique\",\n    value: function notUnique(data, item) {\n      var i;\n      return -1 !== (i = data.findIndex(function (line) {\n        return line[0].toLowerCase() === item.name.toLowerCase();\n      })) && \"Role with name '\".concat(item.name, \"' already exists at entry \").concat(i, \".\");\n    }\n  }, {\n    key: \"hydrate\",\n\n    /**\n    * Turns the 'row' data into minimal Row objects.\n    */\n    value: function hydrate() {\n      return this.getItems().reduce(function (roles, item) {\n        roles[item.name] = new Role(item);\n        return roles;\n      }, {});\n    }\n  }]);\n\n  return RolesTsv;\n}(TsvExt), defineProperty(_class, \"headers\", ['Name', 'Application', 'Super-role', 'Description', 'Notes']), defineProperty(_class, \"keys\", ['name', 'application', 'superRole', 'description', 'notes']), _temp$1);\n\nvar Staff =\n/*#__PURE__*/\nfunction () {\n  function Staff(item) {\n    classCallCheck(this, Staff);\n\n    this.item = item;\n    this.attachedRoles = {}; // keyed by role name\n\n    this.managers = {}; // managers keyed by our role names\n\n    this.reportsByReportRole = {}; // roles keyed to reports role names\n  }\n  /**\n   * Fully defines the staff data. This is done as a static method to allow us to retrieve staff my name and cross-link\n   * managers with reports. In the underlying datastructure, reports are linked to managers and not vice-a-versa, so we\n   * have to pre-define the universe of staff individuals in prep for / before fully defining each..\n   */\n\n\n  createClass(Staff, [{\n    key: \"getEmail\",\n    value: function getEmail() {\n      return this.item.email;\n    }\n  }, {\n    key: \"setEmail\",\n    value: function setEmail(v) {\n      this.item.email = v;\n    }\n  }, {\n    key: \"getFullName\",\n    value: function getFullName() {\n      return \"\".concat(this.getGivenName(), \" \").concat(this.getFamilyName());\n    } // TODO: i18n...\n\n  }, {\n    key: \"getFamilyName\",\n    value: function getFamilyName() {\n      return this.item.familyName;\n    }\n  }, {\n    key: \"setFamilyName\",\n    value: function setFamilyName(v) {\n      this.item.familyName = v;\n    }\n  }, {\n    key: \"getGivenName\",\n    value: function getGivenName() {\n      return this.item.givenName;\n    }\n  }, {\n    key: \"setGivenName\",\n    value: function setGivenName(v) {\n      this.item.givenName = v;\n    }\n  }, {\n    key: \"getStartDate\",\n    value: function getStartDate() {\n      return this.item.startDate;\n    }\n  }, {\n    key: \"setStartDate\",\n    value: function setStartDate(v) {\n      this.item.startDate = v;\n    }\n  }, {\n    key: \"hasRole\",\n    value: function hasRole(roleName) {\n      return Boolean(this.attachedRoles[roleName]);\n    }\n  }, {\n    key: \"getRoleNames\",\n    value: function getRoleNames() {\n      return Object.keys(this.attachedRoles);\n    }\n  }, {\n    key: \"getAttachedRoleByName\",\n    value: function getAttachedRoleByName(roleName) {\n      return this.attachedRoles[roleName];\n    }\n  }, {\n    key: \"getAttachedRoles\",\n    value: function getAttachedRoles() {\n      return Object.values(this.attachedRoles);\n    }\n  }, {\n    key: \"getManagerByRoleName\",\n    value: function getManagerByRoleName(roleName) {\n      return this.managers[roleName];\n    }\n  }, {\n    key: \"getManagers\",\n    value: function getManagers() {\n      return Object.values(this.manangers);\n    }\n  }, {\n    key: \"getReportsByRoleName\",\n    value: function getReportsByRoleName(roleName) {\n      return this.reportsByReportRole[roleName];\n    }\n  }, {\n    key: \"getReports\",\n    value: function getReports() {\n      var _this = this;\n\n      return Object.values(this.reportsByReportRole).reduce(function (acc, reps) {\n        return acc.concat(reps);\n      }, []).filter(function (rep) {\n        return rep.getEmail() !== _this.getEmail();\n      });\n    }\n  }], [{\n    key: \"hydrate\",\n    value: function hydrate(org) {\n      Object.values(org.staff).forEach(function (s) {\n        s.item.primaryRoles.forEach(function (rSpec) {\n          var _rSpec$split = rSpec.split(/\\//),\n              _rSpec$split2 = slicedToArray(_rSpec$split, 3),\n              roleName = _rSpec$split2[0],\n              roleManagerEmail = _rSpec$split2[1],\n              roleParameters = _rSpec$split2[2]; // verify good roleName\n\n\n          var orgNode = org.orgStructure.getNodeByRoleName(roleName);\n          if (orgNode === undefined) throw new Error(\"Staff '\".concat(s.getEmail(), \"' claims non-existent role '\").concat(roleName, \"'.\")); // attach the role\n\n          s.attachedRoles[roleName] = org.roles[roleName].attachTo(s, roleParameters); // TODO: migrate the manager to the AttachedRole\n          // set manager and add ourselves to their reports\n\n          if (orgNode.getParent() !== null) {\n            var roleManager = org.getStaffMember(roleManagerEmail);\n            if (roleManager === undefined) throw new Error(\"No such manager '\".concat(roleManagerEmail, \"' found while loading staff member '\").concat(s.getEmail(), \"'.\"));\n            s.managers[roleName] = roleManager;\n            if (roleManager.reportsByReportRole[roleName] === undefined) roleManager.reportsByReportRole[roleName] = [];\n            roleManager.reportsByReportRole[roleName].push(s);\n          } else s.managers[roleName] = null;\n        });\n      });\n    }\n  }]);\n\n  return Staff;\n}();\n\nvar _class$1, _temp$2;\nvar StaffTsv = (_temp$2 = _class$1 =\n/*#__PURE__*/\nfunction (_TsvExt) {\n  inherits(StaffTsv, _TsvExt);\n\n  function StaffTsv(fileName) {\n    var _this;\n\n    classCallCheck(this, StaffTsv);\n\n    _this = possibleConstructorReturn(this, getPrototypeOf(StaffTsv).call(this, StaffTsv.headers, StaffTsv.keys, fileName, StaffTsv.multis));\n\n    defineProperty(assertThisInitialized(_this), \"matchKey\", function (line, key) {\n      return line[0] === key;\n    });\n\n    return _this;\n  }\n\n  createClass(StaffTsv, [{\n    key: \"init\",\n    value: function init() {\n      return this.getItems().reduce(function (staff, item) {\n        if (staff[item.email] !== undefined) throw new Error(\"member with email '\".concat(item.email, \"' already exists at entry \").concat(item._pos + 1, \".\"));\n        staff[item.email] = new Staff(item);\n        return staff;\n      }, {});\n    }\n  }]);\n\n  return StaffTsv;\n}(TsvExt), defineProperty(_class$1, \"headers\", ['Email', 'Family Name', 'Given Name', 'Start Date', 'Primary Roles', 'Secondary Roles']), defineProperty(_class$1, \"keys\", ['email', 'familyName', 'givenName', 'startDate', 'primaryRoles', 'secondaryRoles']), defineProperty(_class$1, \"multis\", {\n  'primaryRoles': true,\n  'secondaryRoles': true,\n  'managers': true\n}), _temp$2);\n\nvar Organization =\n/*#__PURE__*/\nfunction () {\n  function Organization(rolesTsvPath, staffTsvPath, orgStructurePath) {\n    classCallCheck(this, Organization);\n\n    this.roles = new RolesTsv(rolesTsvPath).hydrate();\n    this.orgStructure = new OrgStructure(orgStructurePath, this.roles);\n    this.staff = new StaffTsv(staffTsvPath).init(this);\n    Staff.hydrate(this);\n  }\n\n  createClass(Organization, [{\n    key: \"getRole\",\n    value: function getRole(name) {\n      return this.roles[name];\n    }\n  }, {\n    key: \"getStaffMember\",\n    value: function getStaffMember(email) {\n      return this.staff[email];\n    }\n  }, {\n    key: \"getStaffByRoleName\",\n    value: function getStaffByRoleName(roleName) {\n      return Object.values(this.staff).filter(function (s) {\n        return s.hasRole(roleName);\n      });\n    }\n  }, {\n    key: \"getManagingRoleByManagedRoleName\",\n    value: function getManagingRoleByManagedRoleName(roleName) {\n      return this.orgStructure.getNodeByRoleName(roleName).getParent();\n    }\n  }, {\n    key: \"generateOrgChartData\",\n    value: function generateOrgChartData() {\n      var _this = this;\n\n      var style = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'debang/OrgChart';\n\n      if (style === 'google-chart') {\n        var result = []; // luckily, the google org chart doesn't care whether we specify the nodes in order or not, so it's a simple\n        // transform\n\n        Object.values(this.staff).forEach(function (s) {\n          s.getAttachedRoles().forEach(function (r) {\n            var myKey = \"\".concat(s.getEmail(), \"/\").concat(r.getName());\n            var manager = s.getManagerByRoleName(r.getName());\n            var managerKey = manager ? \"\".concat(manager.getEmail(), \"/\").concat(_this.getManagingRoleByManagedRoleName(r.getName()).getName()) : '';\n            result.push([myKey, managerKey]);\n          });\n        });\n        return result;\n      } else if (style === 'debang/OrgChart') {\n        // Converts flat/tabular (Staff, Manager) to a JSON tree, allowing for the same staff member to appear at multiple\n        // notes using conversion algorithm from debang demos: https://codepen.io/dabeng/pen/mRZpLK\n        var seedData = this.generateOrgChartData('google-chart').map(function (row) {\n          var _row$0$split = row[0].split(/\\//),\n              _row$0$split2 = slicedToArray(_row$0$split, 2),\n              email = _row$0$split2[0],\n              roleName = _row$0$split2[1];\n\n          var staffMember = _this.getStaffMember(email);\n\n          return {\n            id: row[0],\n            parent_id: row[1],\n            email: email,\n            name: staffMember.getFullName(),\n            titles: [roleName]\n          };\n        });\n        var data = {};\n        var childNodes = [];\n        seedData.forEach(function (item, index) {\n          if (!item.parent_id) {\n            delete item.parent_id;\n            Object.assign(data, item);\n          } else {\n            var jsonloop = new JSONLoop(data, 'id', 'children');\n            jsonloop.findNodeById(data, item.parent_id, function (err, node) {\n              if (err) throw new Error(err);else {\n                delete item.parent_id;\n                childNodes.push(item);\n\n                if (node.children) {\n                  node.children.push(item);\n                } else {\n                  node.children = [item];\n                }\n              }\n            });\n          }\n        }); // now, collapse staff member roles to same staff in parent role if only child\n\n        childNodes.forEach(function (node) {\n          var jsonloop = new JSONLoop(data, 'id', 'children');\n          jsonloop.findParent(data, node, function (err, parent) {\n            if (err) throw new Error(\"Could not find parent for '\".concat(node.id, \"'; is chart valid?\"));\n\n            if (parent && node.email === parent.email && parent.children.length === 1) {\n              var _parent$titles;\n\n              (_parent$titles = parent.titles).push.apply(_parent$titles, toConsumableArray(node.titles));\n\n              parent.children = node.children;\n            }\n          });\n        });\n        return data;\n      } else throw new Error(\"Org chart style '\".concat(style, \"' is not supported.\"));\n    }\n  }]);\n\n  return Organization;\n}();\n\nvar _class$2, _temp$3;\nvar PolicyCalendar = (_temp$3 = _class$2 =\n/*#__PURE__*/\nfunction (_TsvExt) {\n  inherits(PolicyCalendar, _TsvExt);\n\n  /**\n  * Item Name : org wide unique calendar item name.\n  * Description : Short description of calendar item.\n  * Frequency : One of triennial, biennial, annual, semiannual, triannual, quarterly, bimonhtly, monthly, weekly.\n  * Impact Weighting : Roughly the number of man-hours necessary to complete a task.\n  * Span : Number of hours to alot for event. For 8+ hours, span is didvided by 8 and rounded up for span of days.\n  */\n  function PolicyCalendar(fileName) {\n    var _this;\n\n    classCallCheck(this, PolicyCalendar);\n\n    _this = possibleConstructorReturn(this, getPrototypeOf(PolicyCalendar).call(this, PolicyCalendar.headers, PolicyCalendar.keys, fileName));\n\n    defineProperty(assertThisInitialized(_this), \"matchKey\", function (line, key) {\n      return line[0] === key;\n    });\n\n    return _this;\n  }\n\n  createClass(PolicyCalendar, [{\n    key: \"notUnique\",\n    value: function notUnique(data, item) {\n      var i;\n      return -1 !== (i = data.findIndex(function (line) {\n        return line[0].toLowerCase() === item.itemName.toLowerCase();\n      })) && \"Policy calendar item '\".concat(item.itemName, \"' already exists at entry \").concat(i + 1, \".\");\n    }\n    /**\n     * Generates an iniital, balanced, concrete schedule based on the Policy calendar requirements.\n     */\n\n  }, {\n    key: \"schedule\",\n    value: function schedule() {\n      var dayWeights = lib.initDayWeights();\n      this.reset();\n      var item;\n\n      while (item = this.next()) {\n        var monthsSets = void 0;\n\n        switch (item.frequency) {\n          case 'weekly':\n          case 'monthly':\n            monthsSets = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]];\n            break;\n\n          case 'bimonthly':\n            monthsSets = [[0, 2, 4, 6, 8, 10], [1, 3, 5, 7, 9, 11]];\n            break;\n\n          case 'quarterly':\n            monthsSets = [[0, 3, 6, 9]];\n            break;\n\n          case 'triannual':\n            monthsSets = [[0, 4, 8], [1, 5, 9]];\n            break;\n\n          case 'semiannual':\n            monthsSets = [[0, 6], [1, 7], [2, 8], [3, 9]];\n            break;\n\n          default:\n            monthsSets = [[0], [1], [2], [3], [4], [5], [6], [7], [8], [9]];\n            break;\n        }\n\n        var leastMonthsSet = lib.leastMonthsSet(dayWeights, monthsSets); // For sub-annual items, we don't try to align weeks, just months, so earch occurance will be scheduled\n        // independently.\n\n        leastMonthsSet.forEach(function (month) {\n          var leastWeekOfMonth = lib.leastWeekOfMonth(dayWeights, month);\n          var policyEvent = lib.scheduleInWeek(dayWeights[month * 4 + leastWeekOfMonth], item);\n        });\n      } // while ...this.next()\n\n    } // schedule()\n\n  }]);\n\n  return PolicyCalendar;\n}(TsvExt), defineProperty(_class$2, \"headers\", ['UUID', 'Item Name', 'Description', 'Frequency', 'Impact Weighting (hrs)', 'Time Span (days)', 'Absolute Condition', 'Policy Refs']), defineProperty(_class$2, \"keys\", ['uuid', 'itemName', 'description', 'frequency', 'impactWeighting', 'timeSpan', 'absCond', 'policyRefs']), defineProperty(_class$2, \"BIENNIAL_SELECTOR\", ['ODD', 'EVEN']), defineProperty(_class$2, \"TRIENNIAL_SELECTOR\", ['ODD', 'EVEN', 'TRIPLETS']), _temp$3);\n\nvar Glossary =\n/*#__PURE__*/\nfunction () {\n  function Glossary() {\n    classCallCheck(this, Glossary);\n\n    this.terms = [];\n  }\n\n  createClass(Glossary, [{\n    key: \"addTerm\",\n    value: function addTerm(term, definition) {\n      this.terms.push([term, definition]);\n    }\n  }, {\n    key: \"addTermsFromIterator\",\n    value: function addTermsFromIterator(_ref) {\n      var it = _ref.it,\n          _ref$termKey = _ref.termKey,\n          termKey = _ref$termKey === void 0 ? 'name' : _ref$termKey,\n          _ref$descKey = _ref.descKey,\n          descKey = _ref$descKey === void 0 ? 'description' : _ref$descKey;\n      if (!it) return;\n      it.reset();\n      var i;\n\n      while (i = it.next()) {\n        this.addTerm(i[termKey], i[descKey]);\n      }\n    }\n  }, {\n    key: \"generateContent\",\n    value: function generateContent() {\n      var content = \"# Glossary\\n\\n<dl>\";\n      this.terms.sort(function (a, b) {\n        return a[0].localeCompare(b[0]);\n      });\n      this.terms.forEach(function (_ref2) {\n        var _ref3 = slicedToArray(_ref2, 2),\n            term = _ref3[0],\n            def = _ref3[1];\n\n        return content += \"  <dt>\".concat(term, \"</dt>\\n  <dd>\").concat(def, \"</dd>\\n\\n\");\n      });\n      content += \"</dl>\\n\";\n      return content;\n    }\n  }]);\n\n  return Glossary;\n}();\n\nvar _temp$4, _docDir, _roles, _rolesFile, _terms;\nvar Policies = (_temp$4 =\n/*#__PURE__*/\nfunction () {\n  function Policies() {\n    classCallCheck(this, Policies);\n\n    _docDir.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _roles.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _rolesFile.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    _terms.set(this, {\n      writable: true,\n      value: void 0\n    });\n\n    defineProperty(this, \"sourceFiles\", void 0);\n\n    this.sourceFiles = [];\n    this.rolesFile = 'roles.tsv';\n    this.terms = [];\n  }\n\n  createClass(Policies, [{\n    key: \"addSourceFile\",\n    value: function addSourceFile(fileName) {\n      this.sourceFiles.push(fileName);\n    }\n  }, {\n    key: \"setRolesFile\",\n    value: function setRolesFile(name) {\n      this.rolesFile = name;\n    }\n  }, {\n    key: \"getRoles\",\n    value: function getRoles() {\n      if (this.roles !== undefined) return this.roles; // TODO: allom multiple role files to be merged\n\n      var rolesFile = this.findFile(this.rolesFile);\n      this.roles = new RolesTsv(rolesFile);\n      return this.roles;\n    }\n  }, {\n    key: \"findFile\",\n    value: function findFile(baseName) {\n      var re = new RegExp(\"/\".concat(baseName, \"$\"));\n      var results = this.sourceFiles.filter(function (f) {\n        return f.match(re);\n      });\n      if (results.length > 1) throw new Error(\"Found multiple files matching '\".concat(baseName, \"'\"));else if (results.length === 0) return null;else return results[0];\n    }\n  }, {\n    key: \"setDocumentDir\",\n    value: function setDocumentDir(dir) {\n      this.docDir = dir;\n    }\n  }, {\n    key: \"generateDocuments\",\n    value: function generateDocuments() {\n      if (this.docDir === undefined) throw new Error('No document directory defined.');\n      if (!existsSync(this.docDir)) throw new Error(\"Target document dir '\".concat(this.docDir, \"' does not exist.\"));\n      var roles = this.getRoles();\n      var glossary = new Glossary();\n      if (roles) glossary.addTermsFromIterator(roles); // TODO: else warn\n\n      writeFileSync(\"\".concat(this.docDir, \"/Glossary.md\"), glossary.generateContent());\n    }\n  }]);\n\n  return Policies;\n}(), _docDir = new WeakMap(), _roles = new WeakMap(), _rolesFile = new WeakMap(), _terms = new WeakMap(), _temp$4);\n\nexport { OrgStructure, Organization, Policies, PolicyCalendar, Role, RolesTsv, Staff, StaffTsv, TsvExt };\n//# sourceMappingURL=index.es.js.map\n","import { Policies, Roles } from '@liquid-labs/policies-model'\n\nconst refreshDocuments = (destDir, inputFiles) => {\n  const policies = new Policies()\n  inputFiles.forEach((f) => policies.addSourceFile(f))\n  policies.setDocumentDir(destDir)\n  policies.generateDocuments()\n}\n\nexport { refreshDocuments }\n"],"names":["readFileSync","writeFileSync","existsSync","refreshDocuments","destDir","inputFiles","policies","Policies","forEach","f","addSourceFile","setDocumentDir","generateDocuments"],"mappings":"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"}